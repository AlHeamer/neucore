<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <link rel="shortcut icon" href="/favicon.ico">
    <title></title>
    <% for (let i = 0; i < htmlWebpackPlugin.files.css.length; i++) {
        const file = htmlWebpackPlugin.files.css[i];
        if (file.match(/^dist\/theme-/)) { %><link href="<%= file %>" rel="alternate stylesheet"><%
        } else { %><link href="<%= file %>" rel="stylesheet"><%  }
    } %>
    <script type="text/javascript">
        const xhr = new XMLHttpRequest;
        xhr.onload = function() {
            const links = document.getElementsByTagName('link');
            for (let i = 0; i < links.length; i++) {
                if (links[i].getAttribute('href') === 'dist/theme-' + xhr.response.toLowerCase() + '.css') {
                    links[i].setAttribute('rel', 'stylesheet');
                    break;
                }
            }
        };
        xhr.open("GET", "/api/user/settings/system/theme");
        xhr.responseType = "json";
        xhr.send();
    </script>
</head>
<body class="neucore">
    <!--[if lt IE 11]>
        <p style="width: 70%; margin: 4px auto; padding: 4px; border: 2px solid red; ">
            You are using an <strong>outdated</strong> browser. Please
            <a href="https://browsehappy.com/" target="_blank">upgrade your browser</a>
            to improve your experience and security.
        </p>
    <![endif]-->

    <div id="app">
        <div v-if="loadingCount > 0" v-cloak id="loader"></div>

        <div v-if="messageTxt" v-cloak class="alert fade show app-alert" :class="[messageType]">
            {{ messageTxt }}
            <button type="button" class="close" v-on:click="messageTxt = ''" aria-label="Close">
                <span aria-hidden="true">&times;</span>
            </button>
        </div>

        <nav-bar :auth-char="authChar" :page="page" :settings="settings"></nav-bar>

        <component v-if="settings.customization_default_theme" v-bind:is="page"
            :route="route"
            :initialized="initialized"
            :swagger="swagger"
            :settings="settings"
            :player="player"
            :auth-char="authChar">
        </component>

        <footer class="footer bg-light text-dark text-muted small">
            <div class="container-fluid">
                <span v-cloak>{{ settings.customization_footer_text }}</span>
                <a v-cloak :href="settings.customization_github" class="github text-dark text-muted"
                   target="_blank">github</a>
            </div>
        </footer>
    </div>
    <% for (let i = 0; i < htmlWebpackPlugin.files.js.length; i++) {
        const file = htmlWebpackPlugin.files.js[i];
        if (! file.match(/^dist\/theme-/)) { %><script type="text/javascript" src="<%= file %>"></script><% }
    } %>
</body>
</html>
