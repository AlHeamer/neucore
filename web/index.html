<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>Brave Collective Core Services</title>
	<link rel="stylesheet" href="/node_modules/bootswatch/dist/darkly/bootstrap.min.css">
	<link href="/node_modules/open-iconic/font/css/open-iconic-bootstrap.min.css" rel="stylesheet">
	<script src="/node_modules/jquery/dist/jquery.min.js"></script>
	<script src="/node_modules/popper.js/dist/umd/popper.min.js"></script>
	<script src="/node_modules/bootstrap/dist/js/bootstrap.min.js"></script>
	<script src="/node_modules/vue/dist/vue.min.js"></script>
	<style>
		div.alert-success {
			position: fixed;
			top: 50px;
			left: 25%;
			right: 25%;
			z-index: 7000;
			display: none;
		}
		.jumbotron {
			min-height: 430px;
		}
	</style>
</head>
<body>
	<div id="app">

		<nav class="navbar navbar-expand-lg navbar-dark bg-primary sticky-top">
			<a class="navbar-brand" href="https://www.bravecollective.com/" target="_blank"
					title="Brave Collective: What's your fun per hour?">
				<img src="images/brave_32.png" class="mr-2" alt="Brave logo">
				Brave Collective
			</a>
			<ul class="navbar-nav mr-auto"></ul>
			<img v-if="authChar" :src="'https://image.eveonline.com/Character/' + authChar.id + '_32.jpg'"
				class="d-inline-block align-top mr-2" alt="Character Portrait">
			<span class="navbar-brand" v-if="authChar">{{ authChar.name }}</span>
			<input v-on:click="logout" v-if="authChar" class="btn btn-outline-success" type="submit" value="Sign Out">
		</nav>

		<div class="container-fluid">
			<div class="row">
				<div class="col-lg-12">
					<div class="jumbotron mt-3">
						<a href="https://www.bravecollective.com/" target="_blank">
							<img src="/images/brave_300.png" class="float-right" alt="Brave logo"
								title="Brave Collective: What's your fun per hour?">
						</a>
						<h1 class="display-3">BRAVE Core</h1>
						<p class="lead">
							This site provides access to alliance services such as Mumble, Wiki and Forum.
						</p>
						<hr class="my-4">

						<div v-if="! authChar">
							<p class="lead">
								Click the button below to login through <i>EVE Online SSO</i>.
							</p>
							<a :href="loginUrl">
								<img src="/images/EVE_SSO_Login_Buttons_Large_Black.png" alt="LOG IN with EVE Online">
							</a>
							<p>
								<br>
								<small>
									Learn more about the security of <i>EVE Online SSO</i> in this
	<a href="http://community.eveonline.com/news/dev-blogs/eve-online-sso-and-what-you-need-to-know/" target="_blank">
									dev-blog</a> article.
								</small>
							</p>
						</div>

						<div v-if="authChar">

							<p>Please add all your characters by logging in with EVE SSO.</p>
							<p class="lead">
								<a :href="loginAltUrl"><img src="/images/eve_sso.png" alt="LOG IN with EVE Online"></a>
							</p>
						</div>

					</div>
				</div>
			</div> <!-- row -->

			<div v-if="authChar">
				<div class="row">
					<div class="col-lg-8">
						<h2>Characters</h2>
						<div class="alert alert-success" role="alert">Update done.</div>
					</div>
					<div class="col-lg-4"></div>
				</div>
				<div class="row">
					<div class="col-lg-8">
						<div class="card-columns">
							<div v-for="char in player.characters" class="card border-secondary bg-light">
								<div class="card-header">
									<img :src="'https://image.eveonline.com/Character/'+char.id+'_32.jpg'"
										alt="Character Portrait">
									{{ char.name }}
								</div>
								<div class="card-body">
									<p class="card-text">
										<span class="text-muted">Corporation:</span>
										<span v-if="char.corporation">
											{{ char.corporation.name }}
										</span>
										<br>
										<span class="text-muted">Alliance:</span>
										<span v-if="char.corporation && char.corporation.alliance">
											{{ char.corporation.alliance.name }}
										</span>
									</p>
								</div>
								<div class="card-footer">
									<span v-if="char.main" class="oi oi-star text-warning mr-2" title="Main"
										aria-hidden="true"></span>
									<button type="button" class="btn btn-primary btn-sm mb-1"
										v-on:click="makeMain(char.id)"
										v-if="! char.main">Make Main</button>
									<button type="button" class="btn btn-primary btn-sm mb-1"
										v-on:click="update(char.id)">
										<span class="oi oi-loop-circular pull-right"></span>
										Update
									</button>
								</div>
							</div>
						</div>
					</div>
					<div class="col-lg-4">
						<div class="card border-secondary mb-3">
							<h3 class="card-header">Groups</h3>
							<ul class="list-group list-group-flush">
								<li v-for="group in player.groups" class="list-group-item">
									{{ group.name }}
								</li>
							</ul>
						</div>
						<div v-if="player.managerGroups && player.managerGroups.length > 0"
								class="card border-secondary mb-3" >
							<h3 class="card-header">Group Manager</h3>
							<ul class="list-group list-group-flush">
								<li v-for="mg in player.managerGroups" class="list-group-item">
									{{ mg.name }}
								</li>
							</ul>
						</div>
						<div v-if="player.managerApps && player.managerApps.length > 0"
								class="card border-secondary mb-3" >
							<h3 class="card-header">App Manager</h3>
							<ul class="list-group list-group-flush">
								<li v-for="ag in player.managerApps" class="list-group-item">
									{{ ag.name }}
								</li>
							</ul>
						</div>
					</div>
				</div> <!-- row -->
			</div> <!-- if authenticated -->
		</div> <!-- container -->
	</div>
	<script src="/index.js"></script>
</body>
</html>
